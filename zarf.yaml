# Copyright 2024 Defense Unicorns
# SPDX-License-Identifier: AGPL-3.0-or-later OR LicenseRef-Defense-Unicorns-Commercial

# yaml-language-server: $schema=https://raw.githubusercontent.com/defenseunicorns/zarf/main/zarf.schema.json
kind: ZarfPackageConfig
metadata:
  name: renovate
  description: "Renovate is an automated dependency update tool that helps keep dependencies up to date within your software projects. It checks for dependency updates in public or private repositories and then opens appropriate pull or merge requests to make those changes in your project."
  version: "dev"
  annotations:
    dev.uds.title: Renovate
    dev.uds.tagline: Open Source Dependency Update Tool
    dev.uds.categories: Software Dev, IT Management, Security
    dev.uds.keywords: Dependency Management, Automated Updates, Security, Open Source
    dev.uds.icon: data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MCIgaGVpZ2h0PSI4MCIgeG1sbnM6dj0iaHR0cHM6Ly92ZWN0YS5pby9uYW5vIj48ZyBjbGlwLXBhdGg9InVybCgjQSkiPjxwYXRoIGZpbGw9IiNmZmYiIGZpbGwtb3BhY2l0eT0iLjAxIiBkPSJNMTIsMTJoNTZ2NTZIMTJ6Ii8+PHBhdGggZD0iTTY4LDQwYzAsMTUuNDY0LTEyLjUzNiwyOC0yOCwyOFMxMiw1NS40NjQgMTIsNDBzMTIuNTM2LTI4LDI4LTI4LDI4IDEyLjUzNiwyOCAyOHptLTQwLjYyNi0yLjQ4aC0uNTkzYy0uMDMtLjcyOC0yLjA2Ny0yLjY4NS0yLjUxOS0yLjY4NmwtMi41MDksMi41MTNjLjc2My45NywxLjc4NyAxLjY5NiwyLjY1OCAyLjU0NC40NC40MjksMS45NDcgMi40ODQsMi40OTUgMi4zNjEuOTcyLS43NTksMS42OTMtMS43OTMsMi41NDQtMi42NThzMS43NDktMi4wNDUsMi4zNzEtMi42NjdjLjc3MS0uNzcxLDEuOTYtMS42MzYsMi45NjQtMi42NjcuNTIzLS41MzgsMi4zODktMS44NDQsMi4zODktMi41MTktLjEzOS0uOTMzLTIuMDU2LTEuNjY2LTEuNzczLTIuNjMxLjA3OC0uMjY3LDEuNTM5LTEuNjE2LDEuOS0xLjk3OC4yNzItLjI3Mi43MTUtLjI1My43NDQtLjI4MWwyLjIyMywxLjc5N2MuNDQ3LDAgMi41MzgtMi4wOSwyLjUzOC0yLjUzOCwwLS40NjYtMS4yMjQtMS41Mi0xLjY0Ni0xLjk0Mi0uMjcyLS4yNzItLjcxNS0uMjUzLS43NDMtLjI4MXMtLjAxLS40NjktLjI4MS0uNzQ0Yy0uNjE3LS42MjUtNC4zMzMtNC40NzYtNC42NDUtNC41NjctLjg2OC0uMjU0LTIuMTk2LDEuODM4LTIuOTMyLDIuMzQ3bDIuMjQ2LDIuODE2LTIuMzgsMi42OTIgMi4zOCwyLjkzOS0yLjI0MSwyLjUxNy01LjQ4MS01LjQ4MSwyLjM4Ny0yLjY2Ny0yLjUxMy0yLjUwOWMtLjE2NC4wMzctMi4yNDksMi4xMS0yLjQwNywyLjM1Ni0uMTg1LjI4Ny0uMTg1LjMxNiwwIC42MDQuMzY5LjU3NCwyLjM0OCAxLjk0MiwyLjIyNSAyLjQ4OWwtMi4zNTIsMi42NjcgNS4wMDUsNS4wOTljLjMwNCwxLjAzOS0yLjAzOCwxLjkyMi0yLjA1MSwzLjA3NnptMTkuODc0LTEwLjM1NGMtLjI3OS42MjQuNzQ2LDEuNzk2IDEuMjUzLDEuNzA3LjQxLS4wNzIuNTQ2LS4zOTMsMS4xMDQtLjExLjE5Ny4xLDMuMDE2IDIuOTIzLDMuMTE5IDMuMTE4LjEyNy4yNDIuMjIuNDM2LjExNS43MTJsLTguNTc2LDguNjI3Yy0yLjAyNywyLjY3My4wMTcgMy43NTQsMS43NTIgNS42NzItLjQ0NCwxLjI2Ni0uODMxLDIuMDA3LjAyIDMuMjM1LDIuNTkzIDIuMDU3LDQuOTk4IDUuNjM3LDcuNTY1IDcuNTUsMS4xMDIuODIyIDEuODY5LjgyMiwyLjk3MSAwLDEuODQyLTEuMzc0LDIuOTg0LTIuOTA4LDEuNDY3LTUuMDMxLS44MzEtMS4xNjMtNS44MDEtNi4xMzQtNi45NjUtNi45NjUtLjQ3My0uMzM4LTEuMzQ0LS43NzMtMS45MTUtLjc3NS0uNzM2LS4wMDItMS40LjY3LTEuNzQzLjU5NC0uNjQxLS4xNDItMi40NTItMi4zMjYtMS4zODItMy4xMDNsOC40NDgtOC40NDRjLjc0Ny0xLjEuNjQzLTIuMzU4LS4xMzMtMy40MDEtLjQzNS0uNTg1LTMuNDA1LTMuNTI2LTMuOTM4LTMuNzY4LTEuMjM3LS41NjItMi4wNTktLjE3My0zLjE2Mi4zODJ6bS0zLjEyMy0uMDMzTDI3LjY0OSw0My41OTZsNC43NTcsNC43NjEgMTYuNDc1LTE2LjQ2My00Ljc1Ny00Ljc2MXpNMTguOTEsMjkuMjA1bC0yLjY2NywyLjY4NyAyLjcwMywyLjY4MiAyLjY2Ny0yLjY4Ny0yLjcwMy0yLjY4MnoiIGZpbGw9IiMwMjdmYTAiLz48ZyBmaWxsPSIjM2NiNWFmIj48cGF0aCBkPSJNNDQuMTI0LDI3LjEzM0wyNy42NDgsNDMuNTk2bDQuNzU3LDQuNzYxTDQ4Ljg4LDMxLjg5NGwtNC43NTctNC43NjF6bS0zLjcxLTMuMjQ2Yy0uNTU2Ljg1NS0xLjM4MSwxLjUtMi4wOSwyLjIyLS4yNzEuMjc1LS4yNTMuNzE1LS4yODEuNzQ0cy0uNDcyLjAwOS0uNzQ0LjI4MWMtLjM2MS4zNjItMS44MjIsMS43MS0xLjksMS45NzgtLjI4My45NjUsMS42MzQgMS42OTgsMS43NzMgMi42MzEsMCAuNjc1LTEuODY2LDEuOTgxLTIuMzksMi41MTktLjgyMS0uMzYxLTEuMzk0LTEuNTA0LTIuMDY5LTEuOTM4LS4yODgtLjE4NS0uMzE2LS4xODUtLjYwNCwwLS43NS40ODMtMS41NzcsMS44MDYtMi4zNjMsMi4zODNsMi4wNzIsMi4yMjNjLS42MjIuNjIyLTEuNTIzLDEuODA0LTIuMzcxLDIuNjY3bC0yLjA3NS0yLjA3NWMuMDEzLTEuMTU0LDIuMzU1LTIuMDM3LDIuMDUxLTMuMDc1bC01LjAwNS01LjA5OSwyLjM1Mi0yLjY2N2MuMTIyLS41NDctMS44NTYtMS45MTUtMi4yMjUtMi40ODktLjE4NS0uMjg4LS4xODUtLjMxNiwwLS42MDQuMTU4LS4yNDYsMi4yNDMtMi4zMTksMi40MDctMi4zNTZsMi41MTMsMi41MS0yLjM4NywyLjY2NyA1LjQ4MSw1LjQ4MSAyLjI0MS0yLjUxNy0yLjM4LTIuOTM5LDIuMzgtMi42OTItMi4yNDYtMi44MTVjLjczNi0uNTA5LDIuMDY0LTIuNjAyLDIuOTMyLTIuMzQ3LjMxMy4wOTIsNC4wMjkgMy45NDIsNC42NDUgNC41NjcuMjcxLjI3NS4yNTMuNzE1LjI4MS43NDR6Ii8+PC9nPjxwYXRoIGQ9Ik00Ny4yNDcsMjcuMTY2YzEuMTAzLS41NTUsMS45MjQtLjk0NSwzLjE2Mi0uMzgyLjUzMy4yNDIsMy41MDIgMy4xODMsMy45MzggMy43NjguNzc2LDEuMDQzLjg4IDIuMzAxLjEzMywzLjQwMWwtOC40NDgsOC40NDRjLTEuMDcuNzc4Ljc0LDIuOTYxIDEuMzgyLDMuMTAzLjM0NC4wNzYgMS4wMDgtLjU5NiwxLjc0NC0uNTk0LjU3Mi4wMDIsMS40NDIuNDM3IDEuOTE1Ljc3NSwxLjE2My44MzEgNi4xMzQsNS44MDEgNi45NjUsNi45NjUgMS41MTcsMi4xMjMuMzc1IDMuNjU4LTEuNDY3LDUuMDMxLTEuMTAzLjgyMi0xLjg2OS44MjItMi45NzEsMC0yLjU2Ny0xLjkxMy00Ljk3MS01LjQ5My03LjU2NS03LjU1LS44NS0xLjIyOC0uNDY0LTEuOTY5LS4wMi0zLjIzNS0xLjczNS0xLjkxOS0zLjc3OS0zLTEuNzUyLTUuNjcybDguNTc2LTguNjI2Yy4xMDUtLjI3Ni4wMTItLjQ3LS4xMTUtLjcxMi0uMTAzLS4xOTUtMi45MjItMy4wMTktMy4xMTktMy4xMTgtLjU1OC0uMjgzLS42OTQuMDM5LTEuMTA0LjExLS41MDcuMDg4LTEuNTMxLTEuMDg0LTEuMjUzLTEuNzA3ek00OC45LDQ2Ljc0MmMtLjQuMTIzLTEuODU0LDEuNjEyLTEuNjg3LDIuMTg3bDYuODQ2LDcuMTAyYzEuMzE3LDEuMjAyIDMuNjEtLjY0NCwyLjgwOS0yLjIxNmwtNi45NjItNi45NjVjLS4zMDMtLjE5Ni0uNjY4LS4yMTEtMS4wMDUtLjEwOHoiIGZpbGw9IiNmZGZkZmUiLz48ZyBmaWxsPSIjM2NiNWFmIj48cGF0aCBkPSJNMjYuNzgxLDM3LjUybC0yLjM3MSwyLjM3MWMtLjg3LS44NDctMS44OTUtMS41NzQtMi42NTgtMi41NDRsMi41MDktMi41MTNjLjQ1Mi4wMDEsMi40ODkgMS45NTgsMi41MTkgMi42ODZ6bS03Ljg3Mi04LjMxNmwtMi42NjcsMi42ODcgMi43MDMsMi42ODIgMi42NjctMi42ODctMi43MDMtMi42ODJ6Ii8+PC9nPjxnIGZpbGw9IiNmZGZkZmUiPjxwYXRoIGQ9Ik0zOC4wNDMsMjYuODUxYy4wMjgtLjAyOC4wMS0uNDY4LjI4MS0uNzQ0LjcwOS0uNzIsMS41MzQtMS4zNjUsMi4wOS0yLjIyLjAyOC4wMjguNDcxLjAwOS43NDQuMjgxLjQyMi40MjIsMS42NDYgMS40NzUsMS42NDYgMS45NDIsMCAuNDQ3LTIuMDksMi41MzgtMi41MzgsMi41MzhsLTIuMjIzLTEuNzk3em0tMy4yNiw3LjQwOWMtMS4wMDQsMS4wMzItMi4xOTMsMS44OTctMi45NjQsMi42NjdsLTIuMDcyLTIuMjIzYy43ODYtLjU3NywxLjYxMy0xLjksMi4zNjMtMi4zODMuMjg4LS4xODUuMzE2LS4xODUuNjA0LDAgLjY3NS40MzQsMS4yNDggMS41NzcsMi4wNjkgMS45Mzh6bS03LjQwOSwzLjI2bDIuMDc1LDIuMDc1Yy0uODUuODY1LTEuNTcyLDEuODk5LTIuNTQzLDIuNjU4LS41NDguMTIzLTIuMDU1LTEuOTMzLTIuNDk1LTIuMzYxbDIuMzcxLTIuMzcxaC41OTN6Ii8+PC9nPjxwYXRoIGQ9Ik00OC44OTksNDYuNzQyYy4zMzctLjEwNC43MDItLjA4OCwxLjAwNS4xMDhsNi45NjIsNi45NjVjLjgwMiwxLjU3Mi0xLjQ5MiwzLjQxOS0yLjgwOSwyLjIxNmwtNi44NDYtNy4xMDJjLS4xNjctLjU3NCwxLjI4Ny0yLjA2MywxLjY4Ny0yLjE4N3oiIGZpbGw9IiMwMjdmYTAiLz48L2c+PGRlZnM+PGNsaXBQYXRoPjxwYXRoIGZpbGw9IiNmZmYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyLDEyKSIgZD0iTTAsMGg1NnY1NkgweiIvPjwvY2xpcFBhdGg+PC9kZWZzPjwvc3ZnPg==

variables:
  - name: DOMAIN
    default: "uds.dev"
  - name: RENOVATE_SCHEDULE
    default: "*/15 * * * *"

components:

  - name: renovate
    required: true
    description: "Deploy Renovate"
    import:
      path: common
    only:
      flavor: upstream
    charts:
      - name: renovate
        valuesFiles:
          - values/upstream-values.yaml
    images:
      - ghcr.io/renovatebot/renovate:40.61.0-full

  - name: renovate
    required: true
    description: "Deploy Renovate"
    import:
      path: common
    only:
      flavor: registry1
    charts:
      - name: renovate
        valuesFiles:
          - values/registry1-values.yaml
    images:
      - registry1.dso.mil/ironbank/container-hardening-tools/renovate/renovate:40.60.2

  - name: renovate
    required: true
    description: "Deploy Renovate"
    import:
      path: common
    only:
      flavor: unicorn
    charts:
      - name: renovate
        valuesFiles:
          - values/unicorn-values.yaml
    images:
      - registry1.dso.mil/ironbank/container-hardening-tools/renovate/renovate:40.60.2
